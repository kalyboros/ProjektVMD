<!DOCTYPE html>

<html class="no-js" lang="">
  <head>
  	<meta charset="utf-8">
  	<meta http-equiv="x-ua-compatible" content="ie=edge">
  	<title>Algoritem in podatki</title>

  	<script type="text/javascript"></script>

  	<style type="text/css">
  		.div1 {
  			float: left;
  			border: 2px outset red;
  			 margin: 25px;
  		}

  		.div2 {
  			float: left;
  			border: 2px outset red;
  			margin: 25px;
  		}

  		.div3 {
  			float: left;
  			border: 2px outset red;
  			margin: 25px;
  		}

  		.div4 {
  			float: left;
  			border: 2px outset red;
  			margin: 25px;
  		}

  		.div5 {
  			float: left;
  			border: 2px outset red;
  			margin: 25px;
  		}

  		.div6 {
  			float: left;
  			border: 2px outset red;
  			margin: 25px;
  			color: blue;
    		text-align: center
  		}



  		.button {
			background-color: #f4511e;
			border: none;
			color: white;
			float: left;
			padding: 12px 22px;
			text-align: center;
			font-size: 12px;
			margin: 10px;
			opacity: 0.6;
			transition: 0.3s;
			text-decoration: none;
			cursor: pointer;
			}

		.divContainer {
			border: 2px outset green;
  			margin: 15px;
  			display: flex;
  			flex-wrap: wrap;
		}

		.divButtonContainer {
			margin: 10px;
			display: flex !important;
			flex-wrap: wrap;		
		}

  	</style>

  </head>
  <body>
  	<div class="divButtonContainer">
   		<button class="button"  onclick="myFunction()">Update</button>	
  	</div>



  	<div class="divContainer">
	   	<div class="div1" style="width: 800px">
	  		<canvas id="lineChart1" height="200" width="600"></canvas>
	  	</div>

	  	<div class="div2" style="width: 800px">
	  		<canvas id="lineChart2" height="200" width="600"></canvas>
	  	</div>

	  	<div class="div3" style="width: 400px">
	  		<canvas id="lineChart3" height="200" width="300"></canvas>
	  	</div>

	  	<div class="div4" style="width: 400px">
	  		<canvas id="lineChart4" height="200" width="300"></canvas>
	  	</div>

	  	<div class="div5" style="width: 400px">
	  		<canvas id="krof" height="200" width="300"></canvas>
	  	</div>

	  	<div class="div6" style="width: 400px">
	  		<h2><a id="status">Prevoznost?</a></h2>
	  	</div>


  	</div>

  	

  	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.js"></script>
  	<script src="js/myscript.js"></script>
  	<script src=”http://code.jquery.com/jquery-latest.min.js"></script>
  	<script src="/socket.io/socket.io.js"></script>
  	<script>
  	var socket = io();

  	function myFunction(){
  		socket.emit('RequestUpdate', "0");
  		
  	}


  	//posiljanje zahtevkov na server preko gumba
  	function LoadLineChart(){
  		socket.emit('LoadLineChart', "0");
  	};

  	socket.on('prevoznostCesteLong', function(timestamps,counts){
 	var ctx = document.getElementById("lineChart1").getContext('2d');
		var myChart = new Chart(ctx, {
		    type: 'line',
		    data: {
		        labels: timestamps,
		        datasets: [{
		            label: 'Premiki longitudov',
		            data: counts,
		            backgroundColor: [
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(5, 206, 86, 0.2)'

		            ],
		            borderColor: [
		                'rgba(54, 162, 235, 1)',
		                'rgba(255, 206, 86, 1)',
		                'rgba(5, 206, 86, 1)'

		            ],
		            borderWidth: 1
		        }]
		    },
		    options: {
		        scales: {
		            yAxes: [{
		                ticks: {
		                	Min: 200,
                    		Max: 400,
		                    beginAtZero: true
		                }
		            }]
		        }
		    }
		});	
  	});

  	socket.on('prevoznostCesteLat', function(timestamps,counts){
 	var ctx = document.getElementById("lineChart2").getContext('2d');
		var myChart = new Chart(ctx, {
		    type: 'line',
		    data: {
		        labels: timestamps,
		        datasets: [{
		            label: 'Premiki latitudov',
		            data: counts,
		            backgroundColor: [
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(5, 206, 86, 0.2)'

		            ],
		            borderColor: [
		                'rgba(54, 162, 235, 1)',
		                'rgba(255, 206, 86, 1)',
		                'rgba(5, 206, 86, 1)'

		            ],
		            borderWidth: 1
		        }]
		    },
		    options: {
		        scales: {
		            yAxes: [{
		                ticks: {
		                    beginAtZero: true
		                }
		            }]
		        }
		    }
		});	
  	});

  	socket.on('vektorji', function(x,y){
 	var ctx = document.getElementById("lineChart3").getContext('2d');
		var myChart = new Chart(ctx, {
		    type: 'line',
		    data: {
		        labels: x,
		        datasets: [{
		            label: 'Vektorske razlike',
		            data: y,
		            backgroundColor: [
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(5, 206, 86, 0.2)'

		            ],
		            borderColor: [
		                'rgba(54, 162, 235, 1)',
		                'rgba(255, 206, 86, 1)',
		                'rgba(5, 206, 86, 1)'

		            ],
		            borderWidth: 1
		        }]
		    },
		    options: {
		        scales: {
		            yAxes: [{
		                ticks: {
		                    beginAtZero: true
		                }
		            }]
		        }
		    }
		});	
  	});

  	socket.on('CasovneRazlike', function(timeR,count){
 	var ctx = document.getElementById("lineChart4").getContext('2d');
		var myChart = new Chart(ctx, {
		    type: 'line',
		    data: {
		        labels: count,
		        datasets: [{
		            label: 'Časvne razlike zajemov',
		            data: timeR,
		            backgroundColor: [
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(5, 206, 86, 0.2)'

		            ],
		            borderColor: [
		                'rgba(54, 162, 235, 1)',
		                'rgba(255, 206, 86, 1)',
		                'rgba(5, 206, 86, 1)'

		            ],
		            borderWidth: 1
		        }]
		    },
		    options: {
		        scales: {
		            yAxes: [{
		                ticks: {
		                    beginAtZero: true
		                }
		            }]
		        }
		    }
		});	
  	});


  	socket.on('prevoznost', function(prevoznost,status){

  	if(status[0] == 1){
  		document.getElementById("status").innerHTML = "Dobra prevoznost";
  		document.getElementById("status").style.color = "green";
  	}else{
  		document.getElementById("status").innerHTML = "Slaba prevoznost";
  		document.getElementById("status").style.color = "red";
  	}	

 	var ctx = document.getElementById("krof").getContext('2d');
		var myChart = new Chart(ctx, {
		    type: 'doughnut',
		    data: {
		        labels: ['vse','lat','long'],
		        datasets: [{
		            label: 'Situacije prevoznsti',
		            data: prevoznost,
		            backgroundColor: [
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(5, 206, 86, 0.2)'

		            ],
		            borderColor: [
		                'rgba(54, 162, 235, 1)',
		                'rgba(255, 206, 86, 1)',
		                'rgba(5, 206, 86, 1)'

		            ],
		            borderWidth: 1
		        }]
		    },
		    options: {
		        scales: {
		            yAxes: [{
		                ticks: {
		                    beginAtZero: true
		                }
		            }]
		        }
		    }
		});	
  	});

  	</script>

  </body>
</html>